document.getElementById("toggleFriendButton").addEventListener("click",(function(){const e=this,t=e.getAttribute("data-friend-id");e.disabled=!0;const n=e.textContent;e.textContent="Please wait...",fetch("/friendships/toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({friendId:t})}).then((e=>e.json())).then((t=>{t.message.toLowerCase().includes("added")?e.textContent="Remove Friend":t.message.toLowerCase().includes("removed")?e.textContent="Add Friend":e.textContent=n})).catch((t=>{console.error("Error:",t),e.textContent=n,alert("An error occurred. Please try again later.")})).finally((()=>{e.disabled=!1}))}));